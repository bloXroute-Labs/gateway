package servers

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestParseRawTransaction(t *testing.T) {
	rawTxs := []string{"0xf9012982089d8503610d1d878303591f940000000ad52521fad44d69431146bf06e8c0da5680b8c0040000000000000000000000000000000000000000000000000006d48b7993cb4100000000000000000000000000000000000000000000000000069617e140890e02031b9166a2023ee85cddce5518aeb91f3f41f7033b2710c825bcf2dc42c569b4ebc8cd428dadd125dd70727f9186ee547626557a6bf70ea0dd8c8c1e038b4c0436a1b6646048444f45b82a8c265cdc673007c8f127107f9186ee547626557a6bf70ea0dd8c8c1e038b4cc825bcf2dc42c569b4ebc8cd428dadd125dd70728194a0bb533f6396b5036ec4af18c4b62b0727ea06ae503c72be4fe81620549db4624aa050a7222f4ee60f68e7ae46b26264a6eff73e4e5e823ff8006fa1c285e54312dd",
		"0xf9013082089e8503610d1d878303efd6940000000ad52521fad44d69431146bf06e8c0da56870e35fa931a0000b8c004965df5ff6116c395187e000000000000000000000000000000069617e140890e288e5c87fb96cfb8141c00000000000000000000000000000032b86258d1be92020436a1b6646048444f45b82a8c265cdc673007c8f12710c825bcf2dc42c569b4ebc8cd428dadd125dd70727f9186ee547626557a6bf70ea0dd8c8c1e038b4c031b9166a2023ee85cddce5518aeb91f3f41f7033b27107f9186ee547626557a6bf70ea0dd8c8c1e038b4cc825bcf2dc42c569b4ebc8cd428dadd125dd70728193a019aed0392af0c3a2a0ba069a48bbac29441f78b81ca1a2fc6b8d40964a71a314a0178abe0d8c7ebf02490ae928427e38780b904b6dfaadf572fadd31df4d85092a"}
	txsHashes, err := GetRawTxsHashes(rawTxs)
	assert.Nil(t, err)
	expectedHase1 := "0xe91f3067954eaf320f5b0cfafd169c495e38fb2670cf3b582a571af79bbd786e"
	expectedHase2 := "0xf78dd9b22a47d63ba6974a61dc8394c64a9d3abcdd28dda43fd1ab48458fad57"
	assert.Equal(t, txsHashes[0], expectedHase1)
	assert.Equal(t, txsHashes[1], expectedHase2)
}
